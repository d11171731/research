# TAC Document: TAC-2025-TRD-001 - H·ªá th·ªëng L·ªánh ƒêi·ªÅu ki·ªán To√†n di·ªán VNDIRECT

**Created:** 2025-10-29
**Status:** Identified
**Next Phase:** PLAN

---

## Executive Summary

VNDIRECT hi·ªán ch·ªâ c√≥ Conditional Stop Order (CSO), d·∫´n ƒë·∫øn m·∫•t l·ª£i th·∫ø c·∫°nh tranh so v·ªõi c√°c c√¥ng ty ch·ª©ng kho√°n kh√°c. Gi·∫£i ph√°p l√† x√¢y d·ª±ng h·ªá th·ªëng l·ªánh ƒëi·ªÅu ki·ªán to√†n di·ªán (OCO, Trailing Stop, Iceberg, TWAP/VWAP, Bracket, Stop Limit, Take Profit, Basket Order), tri·ªÉn khai song song trong 2-3 th√°ng, v·ªõi m·ª•c ti√™u ƒë·∫°t latency <100ms v√† tƒÉng adoption rate 60% trong 3 th√°ng ƒë·∫ßu.

---

## TAC Analysis

### üîÑ Transform (Fundamental Change)
**B·ªï sung to√†n b·ªô b·ªô l·ªánh ƒëi·ªÅu ki·ªán c√≤n thi·∫øu cho kh√°ch h√†ng:**
- T·ª´ 1 lo·∫°i l·ªánh (CSO) ‚Üí 8+ lo·∫°i l·ªánh chuy√™n nghi·ªáp
- H·ªó tr·ª£ t·ª´ nh√† ƒë·∫ßu t∆∞ c√° nh√¢n ƒë·∫øn trader chuy√™n nghi·ªáp
- X√¢y d·ª±ng conditional order engine m·ªõi v·ªõi performance cao (target <100ms latency)

### üìà Amplify (Scale What Works)
**Chi·∫øn l∆∞·ª£c migration v√† scale:**
- X√¢y h·ªá th·ªëng m·ªõi song song v·ªõi h·ªá th·ªëng c≈©
- Pilot v·ªõi nh√≥m kh√°ch h√†ng beta testers
- Migration ho√†n to√†n trong 2-3 th√°ng
- T·∫≠n d·ª•ng kinh nghi·ªám t·ª´ CSO hi·ªán t·∫°i ƒë·ªÉ thi·∫øt k·∫ø architecture

### ‚úÖ Continue (Keep What's Good)
**Gi·ªØ nguy√™n c√°c quy tr√¨nh c·ªët l√µi:**
- Quy tr√¨nh Risk Management hi·ªán t·∫°i (margin check, position limit)
- Compliance workflow v√† regulatory requirements
- Core matching engine integration
- Authentication/Authorization mechanism
- Settlement v√† clearing process

---

## 5I Framework - IDENTIFY Phase

### [1/5] üí° Intention

**Vision Statement:**
"VNDIRECT tr·ªü th√†nh c√¥ng ty ch·ª©ng kho√°n d·∫´n ƒë·∫ßu v·ªÅ b·ªô l·ªánh ƒëi·ªÅu ki·ªán to√†n di·ªán, cung c·∫•p c√¥ng c·ª• giao d·ªãch chuy√™n nghi·ªáp t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao, gi√∫p m·ªçi nh√† ƒë·∫ßu t∆∞ t·ªëi ∆∞u h√≥a chi·∫øn l∆∞·ª£c ƒë·∫ßu t∆∞ v·ªõi hi·ªáu su·∫•t v∆∞·ª£t tr·ªôi."

**Change Drivers (Why NOW):**
- ‚úì √Åp l·ª±c c·∫°nh tranh - C√°c ƒë·ªëi th·ªß (SSI, HSC, VPS) ƒë√£ c√≥ b·ªô l·ªánh ƒëi·ªÅu ki·ªán ƒë·∫ßy ƒë·ªß h∆°n
- ‚úì Nguy c∆° m·∫•t kh√°ch h√†ng - Traders chuy√™n nghi·ªáp chuy·ªÉn sang competitor do thi·∫øu t√≠nh nƒÉng
- ‚úì C∆° h·ªôi tƒÉng tr∆∞·ªüng - B·ªï sung s·∫£n ph·∫©m ƒë·ªÉ tƒÉng market share v√† trading volume

**Success Definition:**
1. **Performance Excellence**: Latency x·ª≠ l√Ω l·ªánh ƒëi·ªÅu ki·ªán < 100ms cho 99.9% requests
2. **User Adoption**: 60% active traders s·ª≠ d·ª•ng √≠t nh·∫•t 1 lo·∫°i l·ªánh ƒëi·ªÅu ki·ªán m·ªõi trong 3 th√°ng ƒë·∫ßu
3. **Customer Satisfaction**: NPS (Net Promoter Score) tƒÉng 20 ƒëi·ªÉm, retention rate c·ªßa active traders tƒÉng 15%

---

### [2/5] üîó Interconnect

**Key Stakeholders:**

| Stakeholder | Role | Impact | Influence |
|-------------|------|--------|-----------|
| Kh√°ch h√†ng Traders | Ng∆∞·ªùi d√πng cu·ªëi s·∫£n ph·∫©m | HIGH | MEDIUM |
| Product Owner | ƒê·ªãnh nghƒ©a requirements, prioritize features | HIGH | HIGH |
| IT/Dev Team | Ph√°t tri·ªÉn backend, frontend, infrastructure | HIGH | HIGH |
| Trading Operations | V·∫≠n h√†nh, support kh√°ch h√†ng, troubleshoot | HIGH | MEDIUM |
| Risk Management | Ki·ªÉm so√°t r·ªßi ro, ƒë·ªãnh nghƒ©a risk rules | HIGH | HIGH |
| Compliance Team | ƒê·∫£m b·∫£o tu√¢n th·ªß SSC, quy ƒë·ªãnh giao d·ªãch | HIGH | HIGH |
| QA/Testing Team | Test functional, performance, security | MEDIUM | MEDIUM |
| DevOps/Infrastructure | Setup servers, monitoring, scalability | HIGH | MEDIUM |
| Business/Sales | Customer acquisition, promote features | MEDIUM | MEDIUM |
| Senior Management | Approval, budget, strategic direction | MEDIUM | HIGH |
| Market Data Team | Cung c·∫•p real-time market data feed | HIGH | MEDIUM |
| Customer Support | H·ªó tr·ª£ KH s·ª≠ d·ª•ng t√≠nh nƒÉng m·ªõi | MEDIUM | LOW |

**System Dependencies:**

**Upstream (Input) - H·ªá th·ªëng cung c·∫•p d·ªØ li·ªáu/service:**
- **Market Data Feed System** ‚Üí Cung c·∫•p real-time price, volume, best bid/ask
- **Account Management System** ‚Üí Th√¥ng tin t√†i kho·∫£n, s·ªë d∆∞, buying power
- **Margin Management System** ‚Üí Margin available, margin requirements
- **Authentication Service** ‚Üí User authentication, session management
- **Master Data Service** ‚Üí Symbol info, trading rules, market calendar

**Downstream (Output) - H·ªá th·ªëng nh·∫≠n l·ªánh/k·∫øt qu·∫£:**
- **Order Management System (OMS)** ‚Üí Nh·∫≠n l·ªánh ƒë√£ trigger ƒë·ªÉ execute
- **Trading Gateway** ‚Üí G·ª≠i l·ªánh t·ªõi HNX/HOSE matching engine
- **Risk Management System** ‚Üí Pre-trade risk check, position monitoring
- **Portfolio Management** ‚Üí C·∫≠p nh·∫≠t portfolio sau khi l·ªánh execute
- **Reporting/Analytics System** ‚Üí B√°o c√°o l·ªánh ƒëi·ªÅu ki·ªán, performance metrics
- **Settlement System** ‚Üí X·ª≠ l√Ω T+2 settlement cho l·ªánh executed
- **Notification Service** ‚Üí G·ª≠i alert cho KH khi l·ªánh trigger/execute/fail

**Ripple Impact:**
- **Direct Impact**:
  - Dev team (implement m·ªõi)
  - QA team (test intensive)
  - Traders (h·ªçc s·ª≠ d·ª•ng)
  - Risk team (define rules cho t·ª´ng lo·∫°i l·ªánh)

- **Indirect Impact**:
  - Finance team (revenue tracking t·ª´ t√≠nh nƒÉng m·ªõi)
  - Marketing team (communication, campaign launch)
  - Settlement team (volume tƒÉng ‚Üí workload tƒÉng)
  - Infrastructure team (capacity planning cho increased load)

---

### [3/5] üìä Insight

**Current Process (ƒê·∫∑t l·ªánh ƒëi·ªÅu ki·ªán hi·ªán t·∫°i):**
1. Kh√°ch h√†ng login v√†o trading app/web
2. Ch·ªçn m√£ ch·ª©ng kho√°n mu·ªën giao d·ªãch
3. Ch·ªâ c√≥ option: Conditional Stop Order (CSO)
4. Nh·∫≠p ƒëi·ªÅu ki·ªán trigger (price threshold)
5. Nh·∫≠p l·ªánh th·ª±c thi (s·ªë l∆∞·ª£ng, gi√°)
6. Submit ‚Üí Backend check risk ‚Üí L∆∞u v√†o DB
7. Background service monitor market price m·ªói X gi√¢y
8. Khi ƒëi·ªÅu ki·ªán th·ªèa ‚Üí trigger l·ªánh v√†o OMS
9. OMS execute l·ªánh th√¥ng qua trading gateway

**Pain Points:**

1. **Thi·∫øu t√≠nh nƒÉng c·∫°nh tranh**
   - Ch·ªâ c√≥ 1 lo·∫°i l·ªánh (CSO) trong khi competitor c√≥ 8-10 lo·∫°i
   - Kh√°ch h√†ng professional traders ph√†n n√†n thi·∫øu c√¥ng c·ª•
   - M·∫•t kh√°ch h√†ng sang SSI, HSC do thi·∫øu Trailing Stop, OCO, TWAP

2. **Performance ch∆∞a t·ªëi ∆∞u**
   - CSO hi·ªán t·∫°i check market price m·ªói 5-10 gi√¢y (polling)
   - ƒê·ªô tr·ªÖ trigger l·ªánh c√≥ th·ªÉ l√™n ƒë·∫øn 10 gi√¢y
   - Kh√¥ng scale t·ªët khi s·ªë l∆∞·ª£ng l·ªánh ƒëi·ªÅu ki·ªán tƒÉng cao

3. **Tr·∫£i nghi·ªám ng∆∞·ªùi d√πng h·∫°n ch·∫ø**
   - UI/UX ch∆∞a intuitive cho ng∆∞·ªùi d√πng m·ªõi
   - Thi·∫øu visualization c·ªßa l·ªánh ƒëi·ªÅu ki·ªán tr√™n chart
   - Kh√¥ng c√≥ advanced order builder cho strategies ph·ª©c t·∫°p

4. **Kh√≥ b·∫£o tr√¨ v√† m·ªü r·ªông**
   - Code CSO c≈©, tightly coupled v·ªõi monolithic system
   - Kh√≥ th√™m lo·∫°i l·ªánh m·ªõi v√†o architecture hi·ªán t·∫°i
   - Thi·∫øu monitoring v√† alerting cho conditional order engine

5. **Risk management ch∆∞a to√†n di·ªán**
   - Ch∆∞a c√≥ risk check ri√™ng cho t·ª´ng lo·∫°i l·ªánh ƒëi·ªÅu ki·ªán
   - Thi·∫øu circuit breaker khi market volatility cao
   - Ch∆∞a c√≥ backtesting framework ƒë·ªÉ test strategies

**Current Metrics (Baseline):**
- **Active Conditional Orders**: ~5,000 l·ªánh CSO active m·ªói ng√†y
- **Trigger Latency**: Trung b√¨nh 8-12 gi√¢y t·ª´ khi ƒëi·ªÅu ki·ªán th·ªèa ƒë·∫øn khi l·ªánh v√†o OMS
- **Success Rate**: 92% (8% fail do l·ªói k·ªπ thu·∫≠t, timeout, risk reject)
- **Adoption Rate**: 15% active traders s·ª≠ d·ª•ng CSO
- **Customer Complaints**: ~50 tickets/th√°ng v·ªÅ thi·∫øu t√≠nh nƒÉng l·ªánh ƒëi·ªÅu ki·ªán
- **Market Share**: ƒê·ª©ng th·ª© 5 trong top 10 CTCK v·ªÅ conditional order features

**Root Cause Analysis (5 Whys):**

```
Problem: VNDIRECT thua k√©m c·∫°nh tranh v·ªÅ t√≠nh nƒÉng l·ªánh ƒëi·ªÅu ki·ªán

Why? ‚Üí Ch·ªâ c√≥ 1 lo·∫°i l·ªánh (CSO) trong khi competitor c√≥ nhi·ªÅu h∆°n

Why? ‚Üí Ch∆∞a ƒë·∫ßu t∆∞ ph√°t tri·ªÉn c√°c lo·∫°i l·ªánh m·ªõi trong 2-3 nƒÉm qua

Why? ‚Üí ∆Øu ti√™n resource cho c√°c d·ª± √°n kh√°c (mobile app, AI chatbot, v.v.)

Why? ‚Üí Ch∆∞a nh·∫≠n th·ª©c r√µ t√°c ƒë·ªông c·ªßa vi·ªác thi·∫øu t√≠nh nƒÉng ƒë·∫øn retention v√† revenue

Why? ‚Üí Thi·∫øu data c·ª• th·ªÉ v·ªÅ customer churn v√† competitor analysis li√™n quan ƒë·∫øn conditional orders

Root Cause: Thi·∫øu chi·∫øn l∆∞·ª£c product roadmap d√†i h·∫°n v√† competitive analysis v·ªÅ trading features, d·∫´n ƒë·∫øn kh√¥ng ∆∞u ti√™n ƒë·∫ßu t∆∞ v√†o conditional order system
```

---

### [4/5] üí° Innovation

**Solution Options:**

| Option | Pros | Cons | Cost | Timeline | Risk |
|--------|------|------|------|----------|------|
| **A. Incremental Enhancement** - M·ªü r·ªông CSO engine hi·ªán t·∫°i, th√™m t·ª´ng lo·∫°i l·ªánh v√†o code c≈© | ‚Ä¢ T·∫≠n d·ª•ng code base s·∫µn c√≥<br>‚Ä¢ Dev familiar v·ªõi codebase<br>‚Ä¢ Chi ph√≠ th·∫•p nh·∫•t | ‚Ä¢ Technical debt tƒÉng<br>‚Ä¢ Performance kh√¥ng t·ªëi ∆∞u<br>‚Ä¢ Kh√≥ scale v√† maintain<br>‚Ä¢ Kh√¥ng gi·∫£i quy·∫øt cƒÉn b·∫£n | ~500M VND | 4-6 th√°ng | MEDIUM |
| **B. Rebuild from Scratch** - X√¢y h·ªá th·ªëng ho√†n to√†n m·ªõi v·ªõi microservices, event-driven architecture | ‚Ä¢ Architecture hi·ªán ƒë·∫°i<br>‚Ä¢ Performance t·ªëi ∆∞u<br>‚Ä¢ D·ªÖ scale v√† maintain<br>‚Ä¢ Flexibility cao cho future | ‚Ä¢ Chi ph√≠ cao nh·∫•t<br>‚Ä¢ Timeline d√†i<br>‚Ä¢ Risk migration cao<br>‚Ä¢ C·∫ßn skill m·ªõi | ~2B VND | 6-9 th√°ng | HIGH |
| **C. Hybrid Approach** - X√¢y Conditional Order Engine m·ªõi ƒë·ªôc l·∫≠p, t√≠ch h·ª£p v·ªõi h·ªá th·ªëng hi·ªán t·∫°i qua API | ‚Ä¢ Balance gi·ªØa m·ªõi v√† c≈©<br>‚Ä¢ Performance t·ªët<br>‚Ä¢ Migration √≠t risk h∆°n<br>‚Ä¢ Reasonable cost & time | ‚Ä¢ V·∫´n ph·ª• thu·ªôc legacy systems<br>‚Ä¢ C·∫ßn integration effort<br>‚Ä¢ Ph·ª©c t·∫°p h∆°n option A | ~1.2B VND | 2-3 th√°ng | MEDIUM |

**Recommended Solution:** **Option C - Hybrid Approach**

**Reasoning:**
1. **Time-to-market**: 2-3 th√°ng ph√π h·ª£p v·ªõi competitive pressure
2. **Risk Management**: Migration t·ª´ng b∆∞·ªõc, kh√¥ng ·∫£nh h∆∞·ªüng h·ªá th·ªëng c≈©
3. **Performance**: ƒê·∫°t target <100ms v·ªõi event-driven architecture
4. **Cost-effective**: Balance gi·ªØa chi ph√≠ v√† ch·∫•t l∆∞·ª£ng
5. **Future-proof**: Conditional Order Engine m·ªõi c√≥ th·ªÉ evolve ƒë·ªôc l·∫≠p

**High-Level Design:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   VNDIRECT Trading System                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Trading App/Web ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   API Gateway                 ‚îÇ
‚îÇ  (Frontend)      ‚îÇ          ‚îÇ   - Authentication            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ   - Rate Limiting             ‚îÇ
                              ‚îÇ   - Request Routing           ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                             ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                        ‚îÇ                        ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ Conditional Order    ‚îÇ  ‚îÇ   Legacy OMS     ‚îÇ  ‚îÇ  Risk Management     ‚îÇ
         ‚îÇ Engine (NEW)         ‚îÇ  ‚îÇ   (Existing)     ‚îÇ  ‚îÇ  Service             ‚îÇ
         ‚îÇ                      ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                      ‚îÇ
         ‚îÇ ‚Ä¢ Order Validator    ‚îÇ  ‚îÇ ‚Ä¢ Normal Orders  ‚îÇ  ‚îÇ ‚Ä¢ Pre-trade Check    ‚îÇ
         ‚îÇ ‚Ä¢ Condition Monitor  ‚îÇ  ‚îÇ ‚Ä¢ Execution      ‚îÇ  ‚îÇ ‚Ä¢ Position Limit     ‚îÇ
         ‚îÇ ‚Ä¢ Trigger Engine     ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ ‚Ä¢ Margin Check       ‚îÇ
         ‚îÇ ‚Ä¢ State Machine      ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                      ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ                        ‚ñ≤
                    ‚îÇ Trigger Event          ‚îÇ Execute Order
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ           Market Data Stream (Real-time)                 ‚îÇ
         ‚îÇ           - Price Feed                                   ‚îÇ
         ‚îÇ           - Volume, Best Bid/Ask                         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ         Event Store / Message Queue (Kafka/Redis)        ‚îÇ
         ‚îÇ         - Order Events                                   ‚îÇ
         ‚îÇ         - Trigger Events                                 ‚îÇ
         ‚îÇ         - Audit Log                                      ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ       Database                                           ‚îÇ
         ‚îÇ       - Conditional Orders (PostgreSQL)                  ‚îÇ
         ‚îÇ       - Order History                                    ‚îÇ
         ‚îÇ       - User Preferences                                 ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Key Components:**

1. **Conditional Order Engine (Core - NEW)**
   - Order Validator: Validate order syntax, risk check
   - Condition Monitor: Real-time monitoring market data v·ªõi event-driven
   - Trigger Engine: Execute trigger logic cho t·ª´ng lo·∫°i l·ªánh
   - State Machine: Qu·∫£n l√Ω lifecycle c·ªßa conditional order

2. **Technology Stack (Recommended)**
   - Backend: Java Spring Boot / Go (high performance)
   - Message Queue: Kafka ho·∫∑c Redis Streams (real-time events)
   - Database: PostgreSQL (transactional) + Redis (caching)
   - Market Data: WebSocket connection cho real-time feed
   - Monitoring: Prometheus + Grafana

3. **Integration Points**
   - API Gateway: RESTful API cho frontend
   - Legacy OMS: API call khi trigger l·ªánh
   - Risk Service: gRPC call cho pre-trade check
   - Market Data: Subscribe to real-time price stream

4. **Order Types Implementation Priority**
   - **Phase 1 (Month 1)**: Stop Limit, Take Profit, OCO (fundamental)
   - **Phase 2 (Month 2)**: Trailing Stop, Bracket Order (intermediate)
   - **Phase 3 (Month 3)**: Iceberg, TWAP/VWAP, Basket Order (advanced)

---

### [5/5] ‚úÖ Integrity

**Values Alignment:**

- **Customer-Centric**: Gi·∫£i ph√°p t·∫≠p trung v√†o tr·∫£i nghi·ªám ng∆∞·ªùi d√πng, cung c·∫•p c√¥ng c·ª• gi√∫p KH giao d·ªãch hi·ªáu qu·∫£ h∆°n, kh√¥ng ph·∫£i ch·ªâ b√°n t√≠nh nƒÉng

- **Innovation**: ƒê·∫ßu t∆∞ v√†o c√¥ng ngh·ªá hi·ªán ƒë·∫°i (event-driven, real-time processing) ƒë·ªÉ d·∫´n ƒë·∫ßu th·ªã tr∆∞·ªùng, kh√¥ng ch·ªâ ƒëu·ªïi theo competitor

- **Reliability**: ƒê·∫£m b·∫£o system stability v·ªõi migration strategy an to√†n, kh√¥ng ·∫£nh h∆∞·ªüng trading operations hi·ªán t·∫°i

- **Transparency**: R√µ r√†ng v·ªõi KH v·ªÅ c√°ch th·ª©c ho·∫°t ƒë·ªông c·ªßa t·ª´ng lo·∫°i l·ªánh, ƒëi·ªÅu ki·ªán trigger, ph√≠ giao d·ªãch

**Ethical Considerations:**

‚úì **Data Privacy**:
- M√£ h√≥a th√¥ng tin l·ªánh ƒëi·ªÅu ki·ªán c·ªßa KH (encryption at rest & in transit)
- Kh√¥ng chia s·∫ª trading strategies c·ªßa KH v·ªõi b√™n th·ª© 3
- Tu√¢n th·ªß GDPR-like data protection cho KH VIP

‚úì **Accessibility**:
- UI/UX design h·ªó tr·ª£ c·∫£ ng∆∞·ªùi d√πng m·ªõi v√† pro traders
- Cung c·∫•p educational materials, tutorials, demo account
- Mobile app support ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng nh∆∞ web

‚úì **Fairness**:
- T·∫•t c·∫£ KH ƒë·ªÅu c√≥ access v√†o t√≠nh nƒÉng (kh√¥ng limit cho VIP only)
- Kh√¥ng c√≥ "hidden advantages" cho m·ªôt nh√≥m KH n√†o
- Latency target ƒë·ªìng nh·∫•t cho m·ªçi KH (no priority queue d·ª±a tr√™n tier)

‚úì **Security**:
- Implement rate limiting ƒë·ªÉ ch·ªëng abuse/spam orders
- 2FA mandatory cho conditional orders c√≥ gi√° tr·ªã cao
- Real-time fraud detection cho unusual trading patterns
- Circuit breaker khi detect market manipulation attempts

‚úì **Transparency**:
- Th√¥ng b√°o r√µ r√†ng v·ªõi KH khi l·ªánh trigger, execute, ho·∫∑c fail
- Hi·ªÉn th·ªã l·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß (audit trail) c·ªßa conditional orders
- C√¥ng khai ph√≠ giao d·ªãch v√† ƒëi·ªÅu ki·ªán trigger
- Communication plan cho KH v·ªÅ t√≠nh nƒÉng m·ªõi trong qu√° tr√¨nh migration

**Compliance Requirements:**

| Requirement | Description | How Addressed |
|-------------|-------------|---------------|
| **SSC Circular 138/2020** | Quy ƒë·ªãnh v·ªÅ giao d·ªãch ch·ª©ng kho√°n, order types h·ª£p l·ªá | Legal team review t·ª´ng lo·∫°i l·ªánh, ensure tu√¢n th·ªß tr∆∞·ªõc khi launch |
| **Price Limit Rules** | L·ªánh kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° +/-7% floor/ceiling | Validator check ƒëi·ªÅu ki·ªán trigger v√† execution price trong ph·∫°m vi cho ph√©p |
| **Trading Hours** | Ch·ªâ accept/trigger l·ªánh trong gi·ªù giao d·ªãch ch√≠nh th·ª©c | Time-based rules trong Condition Monitor, auto-cancel orders ngo√†i gi·ªù |
| **Margin Requirements** | ƒê·∫£m b·∫£o KH c√≥ ƒë·ªß margin cho l·ªánh ƒëi·ªÅu ki·ªán | Pre-trade risk check v·ªõi Margin Management System tr∆∞·ªõc khi accept order |
| **Audit Trail** | L∆∞u tr·ªØ ƒë·∫ßy ƒë·ªß l·ªãch s·ª≠ 5 nƒÉm theo quy ƒë·ªãnh | Event Store l∆∞u t·∫•t c·∫£ events, compliance report generation tool |
| **Market Manipulation** | Kh√¥ng ƒë∆∞·ª£c t·∫°o l·ªánh gi·∫£ t·∫°o, manipulate gi√° | Fraud detection rules, monitor for wash trading patterns |
| **Customer Suitability** | ƒê·∫£m b·∫£o KH hi·ªÉu r·ªßi ro c·ªßa t·ª´ng lo·∫°i l·ªánh | Mandatory education quiz tr∆∞·ªõc khi unlock advanced order types |

---

## Next Steps

‚úÖ **IDENTIFY Phase Complete** - Problem v√† solution ƒë√£ ƒë∆∞·ª£c ph√¢n t√≠ch k·ªπ l∆∞·ª°ng

üéØ **Ready for PLAN Phase:**

**Option A: Create Full OC Document**
- S·ª≠ d·ª•ng `/oc-create` ƒë·ªÉ t·∫°o Organizational Change document ƒë·∫ßy ƒë·ªß
- Include PLAN, ACCOUNTABILITY, MANAGE phases
- Detailed implementation roadmap

**Option B: Continue with TAC Only**
- S·ª≠ d·ª•ng insights t·ª´ TAC document n√†y
- Manual planning v·ªõi Product/Dev teams
- Agile sprints based on 3-phase priority

üìä **Key Insights to Carry Forward:**

1. **Competitive Urgency**: VNDIRECT ƒëang ·ªü v·ªã tr√≠ th·ª© 5/10, c·∫ßn action nhanh ƒë·ªÉ kh√¥ng m·∫•t th√™m market share

2. **Hybrid Architecture is Key**: Balance gi·ªØa build m·ªõi v√† leverage existing, gi·∫£m risk migration

3. **Phased Rollout**: 3 phases trong 3 th√°ng (fundamental ‚Üí intermediate ‚Üí advanced orders) ƒë·ªÉ ƒë·∫£m b·∫£o quality v√† adoption

4. **Performance is Critical**: <100ms latency l√† competitive advantage, c·∫ßn focus v√†o event-driven architecture

5. **Compliance Cannot be Compromised**: Legal review v√† risk management ph·∫£i integrate ngay t·ª´ ƒë·∫ßu, kh√¥ng ph·∫£i afterthought

---

## Appendix

**TAC Framework Summary:**

- **Transform**: B·ªï sung to√†n b·ªô 8 lo·∫°i l·ªánh ƒëi·ªÅu ki·ªán (t·ª´ 1‚Üí8+), x√¢y conditional order engine m·ªõi v·ªõi event-driven architecture

- **Amplify**: Chi·∫øn l∆∞·ª£c migration song song v√† pilot testing, t·∫≠n d·ª•ng lessons learned t·ª´ CSO hi·ªán t·∫°i

- **Continue**: Gi·ªØ nguy√™n risk management process, compliance workflows, core OMS integration, v√† trading gateway

**Order Types Roadmap:**

**Phase 1 (Fundamental) - Month 1:**
1. Stop Limit Order
2. Take Profit Order
3. OCO (One-Cancels-Other)

**Phase 2 (Intermediate) - Month 2:**
4. Trailing Stop Order
5. Bracket Order

**Phase 3 (Advanced) - Month 3:**
6. Iceberg Order
7. TWAP (Time-Weighted Average Price)
8. VWAP (Volume-Weighted Average Price)
9. Basket Order

**Success Metrics Dashboard (To be tracked):**
- Latency P50, P95, P99 (<100ms target)
- Adoption rate by order type
- Success rate (trigger ‚Üí execution)
- Customer satisfaction (NPS, CSAT)
- Market share movement
- Trading volume impact
- Revenue from new features

---

**Version:** 1.0
**Last Updated:** 2025-10-29
**Document Owner:** Product Team - Trading Platform
**Reviewed By:** [To be filled]
**Approved By:** [To be filled]
